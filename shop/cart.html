<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Кошик</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
</head>
<body style="background-color: azure;">
    <H1 class="text-center" style="color: aquamarine;">Вітаємо в кошику!</H1>
    <H3 class="text-center" style="color:aqua;" id="money">Тут товарів на грн</H1>
        <div style="position:absolute; top:0; left:0;"><a href="https://remoteaccess01.pythonanywhere.com/clear_cart/"><button type="submit">
            <img width="40px" src="https://cdn-icons-png.flaticon.com/512/8339/8339238.png" alt="buttonpng"/>
          </button></a></div>
        <div style="position:absolute; top:0; right:0;"><a href="/shop/cart"><button type="submit">
        <img width="40px" src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSUyMBNqSvFL4-xPGCqXfUXlxf9HFL-jJPWfyQsgKWbiV8J_HeuyFYUXrM-EPU-VhjvMgc&usqp=CAU" alt="buttonpng"/>
          </button></a></div>
    <div class="row row-cols-1 row-cols-md-4 row-cols-lg-3" id="dv">
    </div>
    <script>
        
        fetch('https://remoteaccess01.pythonanywhere.com/showall')
        .then((response) => {
        return response.json();
        })
        .then((data) => {
        console.log(data);
        var ts = 0;
        var i = 0;
        while (i<Object.keys(data).length) {
            console.log("for here " + i)
            fetch('https://remoteaccess01.pythonanywhere.com/describe_element/' + data[i] +'/')
            .then((response3) => {
                return response3.json();
            
            })
            .then((data2) => {
                console.log("adding")
                var div = document.getElementById("dv")
                console.log("for number " + i)
                div.innerHTML += "<div class='card' style='width: 18rem;'><img src='/static/" + data2[2] +" ' id='cardimg' class='card-img-top' alt=''><div class='card-body'><h5 class='card-title' id='1title'>"+data2[0]+"</h5><p class='card-text' id='1t'>"+data2[1]+" грн </p><a href='https://remoteaccess01.pythonanywhere.com/add_tov/" + data[3] +"/' class='btn btn-primary' id='1s'>Додати ще одну одиницю</a><a href='https://remoteaccess01.pythonanywhere.com/delete_tov/" + data[3] +"/' class='btn btn-danger' id='1s'>Видалити з кошика</a></div></div>";
                // ts+=data2[1]
            });
            i++;
                    }
                
        });
        fetch('https://remoteaccess01.pythonanywhere.com/sina/')
        .then((response) => {
        return response.json();
        })
        .then((data) => {
            document.getElementById("money").innerHTML = "Тут товарів на " + data + " грн";
        });
        
    </script>
</body>
</html>